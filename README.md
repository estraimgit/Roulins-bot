# Prisoner's Dilemma Experiment Bot

Многоязычный Telegram бот для проведения эксперимента по изучению влияния ИИ на принятие решений в контексте дилеммы заключенного.

## Описание

Этот проект представляет собой экспериментальный Telegram бот, разработанный для исследования того, как ИИ-чатботы могут стратегически влиять на рациональное принятие решений человеком, манипулируя подсознательным фактором притяжения, гипотетически описанным в квантовой теории решений (QDT).

### Ключевые особенности:

- **Случайное распределение**: Участники случайно назначаются в одну из двух экспериментальных групп
- **Многоязычная поддержка**: Поддержка 8+ языков с автоматическим определением языка
- **Адаптивный нуджинг**: Персонализированные диалоги, направленные на конкретное решение
- **Временные ограничения**: 5-минутные сессии с предупреждениями
- **Безопасный сбор данных**: Шифрование всех данных и анонимизация участников
- **Пост-интерактивный опрос**: Оценка восприятия влияния и манипуляций

## Научная основа

Эксперимент исследует:
1. Способность ИИ формировать фактор притяжения в принятии решений человеком
2. Эффективность нуджинга в различных языковых и культурных контекстах
3. Этические последствия использования ИИ-инструментов в рациональном выборе

## Установка

1. **Клонируйте репозиторий:**
```bash
git clone git@github.com:estraimgit/Roulins-bot.git
cd Roulins-bot
```

2. **Создайте виртуальное окружение:**
```bash
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

4. **Настройте переменные окружения:**
```bash
cp config.env.example .env
```

**ВАЖНО: Сгенерируйте безопасный ключ шифрования:**
```bash
python generate_key.py
```

Отредактируйте файл `.env` и укажите:
- `BOT_TOKEN` - токен вашего бота от @BotFather
- `ENCRYPTION_KEY` - ключ шифрования (сгенерированный выше)
- `ADMIN_USER_IDS` - ID администраторов через запятую

5. **Запустите бота:**
```bash
python main.py
```

## Структура проекта

```
├── main.py                    # Основной файл бота
├── config/                    # Конфигурационные файлы
│   ├── settings.py           # Настройки приложения
│   └── nudging_texts.py      # Тексты для нуджинга
├── handlers/                  # Обработчики команд
│   ├── experiment_handler.py # Основная логика эксперимента
│   └── survey_handler.py     # Обработка опросов
├── utils/                     # Вспомогательные функции
│   ├── database.py           # Работа с базой данных
│   ├── randomization.py      # Случайное распределение
│   ├── multilingual.py       # Многоязычная поддержка
│   └── data_analysis.py      # Анализ данных
├── data/                      # База данных и логи
├── logs/                      # Файлы логов
└── requirements.txt           # Зависимости Python
```

## Использование

### Для участников:
1. Найдите бота в Telegram
2. Отправьте команду `/start`
3. Выберите предпочитаемый язык
4. Участвуйте в 5-минутной беседе
5. Примите решение (признаться или молчать)
6. Заполните опрос

### Для исследователей:
- Команда `/status` - статистика эксперимента (только для администраторов)
- Анализ данных через `utils/data_analysis.py`
- Экспорт данных в JSON формате

## Экспериментальные группы

### Группа A - Нуджинг к признанию
- Позитивное эмоциональное фреймирование
- Подчеркивание преимуществ честности
- Апелляция к социальным нормам
- Обеспечение безопасности

### Группа B - Нуджинг к молчанию
- Позитивное фреймирование лояльности
- Подчеркивание важности доверия
- Апелляция к стратегическому мышлению
- Потенциальные награды за молчание

## Безопасность и этика

- **Анонимизация**: Все личные данные шифруются и анонимизируются
- **Согласие**: Участники информированы о характере исследования
- **Этический дебрифинг**: Обязательное объяснение после эксперимента
- **Безопасность данных**: Шифрование в покое и при передаче

## Анализ данных

```python
from utils.data_analysis import DataAnalyzer

# Создание анализатора
analyzer = DataAnalyzer()

# Получение сводки
summary = analyzer.get_experiment_summary()

# Анализ эффективности нуджинга
nudging_analysis = analyzer.get_nudging_effectiveness()

# Экспорт всех данных
analyzer.export_data("experiment_results.json")

# Генерация отчета
report = analyzer.generate_report()
print(report)
```

## Развертывание

Подробные инструкции по развертыванию см. в [DEPLOYMENT.md](DEPLOYMENT.md)

## Поддерживаемые языки

- English (en)
- Русский (ru)
- Español (es)
- Français (fr)
- Deutsch (de)
- 中文 (zh)
- 日本語 (ja)
- العربية (ar)

## Требования

- Python 3.9+
- Telegram Bot Token
- SQLite (включена)
- Интернет-соединение для переводов

## Лицензия

MIT License

## Этические соображения

Этот проект предназначен для академических исследований. При использовании:

1. Получите одобрение этического комитета
2. Обеспечьте информированное согласие участников
3. Проведите этический дебрифинг после эксперимента
4. Соблюдайте все применимые законы о защите данных

## Обновление бота на сервере

### Автоматическое обновление (рекомендуется)
```bash
# Подключитесь к серверу
ssh your_user@your_server
cd /path/to/Roulins_Bot

# Запустите скрипт обновления
chmod +x safe_update.sh
./safe_update.sh
```

Скрипт автоматически:
- Создаст резервные копии
- Остановит бота
- Загрузит обновления
- Восстановит настройки
- Запустит обновленного бота

### Быстрое обновление
```bash
chmod +x quick_update.sh
./quick_update.sh
```

### Подробные инструкции
См. [DEPLOY_UPDATE.md](DEPLOY_UPDATE.md) для полной инструкции по обновлению

## Поддержка

При возникновении проблем:
1. Проверьте логи в `logs/bot.log` и `logs/bot_output.log`
2. Убедитесь в корректности конфигурации
3. Используйте скрипты резервного копирования
4. Создайте issue в репозитории GitHub
